@model UserProfileEditViewModel
@{
    var departments = new List<string> { "HR", "IT", "Finance", "Marketing" };
    var positions = new List<string> { "Junior Dev", "Mid Dev", "Senior dev", "Devops" };
    ViewData["Title"] = "User Profile";    
    bool isEditable = (ViewData["IsEditable"] as bool?) ?? false;
}

<h2>User Profile</h2>

<form asp-action="Edit" method="post">
    <input type="hidden" asp-for="Id" />

    <dl class="row">
        <dt class="col-sm-3">First Name</dt>
        <dd class="col-sm-9">
            @if (isEditable)
            {
                <input asp-for="FirstName" class="form-control" />
            }
            else
            {
                <input asp-for="FirstName" class="form-control" type="hidden" />
                @Model.FirstName
            }
        </dd>

        <dt class="col-sm-3">Last Name</dt>
        <dd class="col-sm-9">
            @if (isEditable)
            {
                <input asp-for="LastName" class="form-control" />
            }
            else
            {
                <input asp-for="LastName" class="form-control" type="hidden" />
                @Model.LastName
            }
        </dd>

        <dt class="col-sm-3">Email</dt>
        <input asp-for="Email" class="form-control" type="hidden" />
        <dd class="col-sm-9">@Model.Email</dd>

        <dt class="col-sm-3">Position</dt>
        <dd class="col-sm-9">
            @if (isEditable)
            {
                <select asp-for="Position" class="form-control">
                    <option value="">-- Select Position --</option>
                    @foreach (var pos in positions)
                    {
                        <option value="@pos">@pos</option>
                    }
                </select>
            }
            else
            {
                <input asp-for="Position" class="form-control" type="hidden" />
                @(Model.Position ?? "N/A")
            }
        </dd>

        <dt class="col-sm-3">Salary</dt>
        <dd class="col-sm-9">
            @if (isEditable && Model.Salary.HasValue)
            {
                <input asp-for="Salary" class="form-control" />
            }
            else
            {
                <input asp-for="Salary" class="form-control" type="hidden" />
                @(Model.Salary.HasValue ? Model.Salary.Value.ToString("C") : "N/A")
            }
        </dd>

        <dt class="col-sm-3">Department</dt>
        <dd class="col-sm-9">
            @if (isEditable && User.IsInRole("admin"))
            {
                 <select asp-for="Department" class="form-control">
                    <option value="">-- Select Department --</option>
                    @foreach (var dept in departments)
                    {
                        <option value="@dept">@dept</option>
                    }
                </select>
            }
            else
            {
                <input asp-for="Department" class="form-control" type="hidden"/>
                @(Model.Department ?? "N/A")
            }
        </dd>
    </dl>

    @if (isEditable)
    {
        <button type="submit" class="btn btn-primary">Save Changes</button>
    }
</form>
