@model UserProfileEditViewModel
@{
    ViewData["Title"] = "User Profile";    
    bool isEditable = (ViewData["IsEditable"] as bool?) ?? false;
}

<h2>User Profile</h2>

<form asp-action="Edit" method="post">
    <input type="hidden" asp-for="Id" />

    <dl class="row">
        <dt class="col-sm-3">First Name</dt>
        <dd class="col-sm-9">
            @if (isEditable)
            {
                <input asp-for="FirstName" class="form-control" />
            }
            else
            {
                @Model.FirstName
            }
        </dd>

        <dt class="col-sm-3">Last Name</dt>
        <dd class="col-sm-9">
            @if (isEditable)
            {
                <input asp-for="LastName" class="form-control" />
            }
            else
            {
                @Model.LastName
            }
        </dd>

        <dt class="col-sm-3">Email</dt>
        <dd class="col-sm-9">@Model.Email</dd>

        <dt class="col-sm-3">Salary</dt>
        <dd class="col-sm-9">
            @if (isEditable && Model.Salary.HasValue)
            {
                <input asp-for="Salary" class="form-control" />
            }
            else
            {
                @(Model.Salary.HasValue ? Model.Salary.Value.ToString("C") : "N/A")
            }
        </dd>

        <dt class="col-sm-3">Department</dt>
        <dd class="col-sm-9">
            @if (isEditable && User.IsInRole("admin"))
            {
                <input asp-for="Department" class="form-control" />
            }
            else
            {
                <input asp-for="Department" class="form-control" type="hidden"/>
                @(Model.Department ?? "N/A")
            }
        </dd>
    </dl>

    @if (isEditable)
    {
        <button type="submit" class="btn btn-primary">Save Changes</button>
    }
</form>
